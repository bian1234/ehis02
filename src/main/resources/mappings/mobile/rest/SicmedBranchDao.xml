<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.cfq.mobile.rest.dao.SicmedBranchDao">
    
	<sql id="sicmedBranchColumns">
		a.id AS "id",
		a.branch_code AS "branchCode",
		a.branch_number AS "branchNumber",
		a.branch_name AS "branchName",
		a.branch_name_english AS "branchNameEnglish",
		a.branch_location AS "branchLocation",
		a.branch_registered AS "branchRegistered",
		a.branch_registered_am AS "branchRegisteredAm",
		a.branch_registered_pm AS "branchRegisteredPm",
		a.branch_ipd AS "branchIpd",
		a.create_by AS "createBy.id",
		a.create_date AS "createDate",
		a.update_by AS "updateBy.id",
		a.update_date AS "updateDate",
		a.remarks AS "remarks",
		a.del_flag AS "delFlag"
	</sql>
	
	<sql id="sicmedBranchJoins">
	</sql>
	
    <select id="get" resultType="SicmedBranch">
		SELECT 
			<include refid="sicmedBranchColumns"/>
		FROM sicmed_branch a
		<include refid="sicmedBranchJoins"/>
		where a.id = #{id}
	</select>
    
	<!-- <select id="get" resultType="SicmedBranch">
		SELECT 
			<include refid="sicmedBranchColumns"/>
		FROM sicmed_branch a
		<include refid="sicmedBranchJoins"/>
		<where>
		a.del_flag = #{DEL_FLAG_NORMAL}
		<if test="id != null and id != ''">
				AND a.id = #{id}
			</if>
		<if test="remarks != null and remarks != ''">
				AND a.remarks = #{remarks}
			</if>
		</where>
	</select> -->
	
	<select id="findList" resultType="SicmedBranch">
		SELECT 
			<include refid="sicmedBranchColumns"/>
		FROM sicmed_branch a
		<include refid="sicmedBranchJoins"/>
		<where>
			a.del_flag = #{DEL_FLAG_NORMAL}
			<if test="id != null and id != ''">
				AND a.id = #{id}
			</if>
			<if test="branchCode != null and branchCode != ''">
				AND a.branch_code = #{branchCode}
			</if>
			<if test="branchNumber != null and branchNumber != ''">
				AND a.branch_number = #{branchNumber}
			</if>
			<if test="branchName != null and branchName != ''">
				AND a.branch_name = #{branchName}
			</if>
			<if test="branchNameEnglish != null and branchNameEnglish != ''">
				AND a.branch_name_english = #{branchNameEnglish}
			</if>
			<if test="branchLocation != null and branchLocation != ''">
				AND a.branch_location = #{branchLocation}
			</if>
			<if test="branchRegistered != null and branchRegistered != ''">
				AND a.branch_registered = #{branchRegistered}
			</if>
			<if test="branchIpd != null and branchIpd != ''">
				AND a.branch_ipd = #{branchIpd}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.update_date DESC
			</otherwise>
		</choose>
	</select>
	
	<!-- 模糊查询带分页web -->
	<select id="findLike" resultType="SicmedBranch">
		SELECT 
			<include refid="sicmedBranchColumns"/>
		FROM sicmed_branch a
		<include refid="sicmedBranchJoins"/>
		<where>
			a.del_flag = #{DEL_FLAG_NORMAL}
			<if test="id != null and id != ''">
				AND a.id = #{id}
			</if>
			<if test="branchCode != null and branchCode != ''">
				AND a.branch_code LIKE CONCAT('%',#{branchCode},'%' )
			</if>
			<if test="branchNumber != null and branchNumber != ''">
				AND a.branch_number = #{branchNumber}
			</if>
			<if test="branchName != null and branchName != ''">
				AND a.branch_name LIKE CONCAT('%',#{branchName},'%' )
			</if>
			<if test="branchNameEnglish != null and branchNameEnglish != ''">
				AND a.branch_name_english = #{branchNameEnglish}
			</if>
			<if test="branchLocation != null and branchLocation != ''">
				AND a.branch_location = #{branchLocation}
			</if>
			<if test="branchRegistered != null and branchRegistered != ''">
				AND a.branch_registered = #{branchRegistered}
			</if>
			<if test="branchIpd != null and branchIpd != ''">
				AND a.branch_ipd = #{branchIpd}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.update_date DESC
			</otherwise>
		</choose>
	</select>
	
	
	<select id="findAllList" resultType="SicmedBranch">
		SELECT 
			<include refid="sicmedBranchColumns"/>
		FROM sicmed_branch a
		<include refid="sicmedBranchJoins"/>
		<where>
			a.del_flag = #{DEL_FLAG_NORMAL}
		</where>		
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.update_date DESC
			</otherwise>
		</choose>
	</select>
	
	<insert id="insert">
		INSERT INTO sicmed_branch(
			id,
			branch_code,
			branch_number,
			branch_name,
			branch_name_english,
			branch_location,
			branch_registered,
			branch_registered_am,
			branch_registered_pm,
			branch_ipd,
			create_by,
			create_date,
			update_by,
			update_date,
			remarks,
			del_flag
		) VALUES (
			#{id},
			#{branchCode},
			#{branchNumber},
			#{branchName},
			#{branchNameEnglish},
			#{branchLocation},
			#{branchRegistered},
			#{branchRegisteredAm},
			#{branchRegisteredPm},
			#{branchIpd},
			#{createBy.id},
			#{createDate},
			#{updateBy.id},
			#{updateDate},
			#{remarks},
			#{delFlag}
		)
	</insert>
	
	<update id="update">
		UPDATE sicmed_branch SET 	
			branch_code = #{branchCode},
			branch_number = #{branchNumber},
			branch_name = #{branchName},
			branch_name_english = #{branchNameEnglish},
			branch_location = #{branchLocation},
			branch_registered = #{branchRegistered},
			branch_registered_am = #{branchRegisteredAm},
			branch_registered_pm = #{branchRegisteredPm},
			branch_ipd = #{branchIpd},
			update_by = #{updateBy.id},
			update_date = #{updateDate},
			remarks = #{remarks}
		WHERE id = #{id}
	</update>
	
	<update id="delete">
		UPDATE sicmed_branch SET 
			del_flag = #{DEL_FLAG_DELETE}
		WHERE id = #{id}
	</update>
	
</mapper>