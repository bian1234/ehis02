<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.thinkgem.jeesite.cfq.mobile.rest.dao.SicmedInspectDao">

	<sql id="sicmedInspectColumns">
		a.id AS "id",
		<!-- a.inspect_code AS "inspectCode", -->
		a.inspect_name AS "inspectName",
		a.inspect_code AS "inspectCode",
		a.inspect_name_py AS "inspectNamePY",
		a.inspect_price_code AS
		"sicmedInspectPrice.id",
		a.inspect_class_code AS
		"sicmedInspectClass.id",
		a.inspect_detail AS "inspectDetail",
		a.create_by AS "createBy.id",
		a.create_date AS "createDate",
		a.update_by AS "updateBy.id",
		a.update_date AS "updateDate",
		a.remarks
		AS "remarks",
		a.del_flag AS "delFlag",

		b.inspect_name AS
		"sicmedInspectClass.inspectName",
		c.price AS
		"sicmedInspectPrice.price"
	</sql>

	<sql id="sicmedInspectJoins">
		LEFT JOIN sicmed_inspect_class b ON b.id =
		a.inspect_class_code
		LEFT JOIN sicmed_inspect_price c ON c.id =
		a.inspect_price_code
	</sql>

	<select id="get" resultType="SicmedInspect">
		SELECT
		<include refid="sicmedInspectColumns" />
		FROM sicmed_inspect a
		<include refid="sicmedInspectJoins" />
		WHERE a.id = #{id}
	</select>

	<select id="getInspect" resultType="SicmedInspect">
		SELECT
		<include refid="sicmedInspectColumns" />
		FROM sicmed_inspect a
		<include refid="sicmedInspectJoins" />
		<where>
			a.del_flag = #{DEL_FLAG_NORMAL}
			<!-- <if test="inspectCode != null and inspectCode != ''"> AND a.inspect_code 
				= #{inspectCode} </if> -->
		</where>
	</select>

	<select id="findList" resultType="SicmedInspect">
		SELECT
		<include refid="sicmedInspectColumns" />
		FROM sicmed_inspect a
		<include refid="sicmedInspectJoins" />
		<where>
			a.del_flag = #{DEL_FLAG_NORMAL}
			<!-- <if test="inspectCode != null and inspectCode != ''">
				AND a.inspect_code = #{inspectCode}
			</if>
			<if test="inspectName != null and inspectName != ''">
				AND a.inspect_name = #{inspectName}
			</if> -->
			<if test="inspectCode != null and inspectCode != ''">
				AND a.inspect_code = #{inspectCode}
			</if>
			<if test="inspectName != null and inspectName != ''">
				AND a.inspect_name = #{inspectName}
			</if>
			<if
				test="sicmedInspectPrice != null and sicmedInspectPrice.id != null and sicmedInspectPrice.id != ''">
				AND a.inspect_price_code = #{sicmedInspectPrice.id}
			</if>
			<if
				test="sicmedInspectClass != null and sicmedInspectClass.id != null and sicmedInspectClass.id != ''">
				AND a.inspect_class_code = #{sicmedInspectClass.id}
			</if>
			<if test="inspectDetail != null and inspectDetail != ''">
				AND a.inspect_detail = #{inspectDetail}
			</if>
			<if test="createBy != null and createBy.id != null and createBy.id != ''">
				AND a.create_by = #{createBy.id}
			</if>
			<!-- <if test="inspectNamePY != null and inspectNamePY != ''">
				AND a.inspect_name_py = #{inspectNamePY}
			</if> -->
			<if test="inspectNamePY != null and inspectNamePY != ''">
				AND a.inspect_name_py = #{inspectNamePY}
			</if>
			<if
				test="sicmedInspectClass != null and sicmedInspectClass.inspectName != null and sicmedInspectClass.inspectName != ''">
				AND b.inspect_name = #{sicmedInspectClass.inspectName}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.update_date DESC
			</otherwise>
		</choose>
	</select>
	
	<!-- 模糊查询带分页web -->
	<select id="findLike" resultType="SicmedInspect">
		SELECT
		<include refid="sicmedInspectColumns" />
		FROM sicmed_inspect a
		<include refid="sicmedInspectJoins" />
		<where>
			a.del_flag = #{DEL_FLAG_NORMAL}
			<if test="inspectCode != null and inspectCode != ''">
				AND a.inspect_code LIKE CONCAT('%',#{inspectCode},'%')
			</if>
			<if test="inspectName != null and inspectName != ''">
				AND a.inspect_name LIKE CONCAT('%',#{inspectName},'%')
			</if>
			<if
				test="sicmedInspectPrice != null and sicmedInspectPrice.id != null and sicmedInspectPrice.id != ''">
				AND a.inspect_price_code = #{sicmedInspectPrice.id}
			</if>
			<if
				test="sicmedInspectClass != null and sicmedInspectClass.id != null and sicmedInspectClass.id != ''">
				AND a.inspect_class_code = #{sicmedInspectClass.id}
			</if>
			<if test="inspectDetail != null and inspectDetail != ''">
				AND a.inspect_detail = #{inspectDetail}
			</if>
			<if test="createBy != null and createBy.id != null and createBy.id != ''">
				AND a.create_by = #{createBy.id}
			</if>
			<if test="inspectNamePY != null and inspectNamePY != ''">
				AND a.inspect_name_py LIKE CONCAT('%',#{inspectNamePY},'%')
			</if>
			<if
				test="sicmedInspectClass != null and sicmedInspectClass.inspectName != null and sicmedInspectClass.inspectName != ''">
				AND b.inspect_name = #{sicmedInspectClass.inspectName}
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.update_date DESC
			</otherwise>
		</choose>
	</select>

	<select id="findAllList" resultType="SicmedInspect">
		SELECT
		<include refid="sicmedInspectColumns" />
		FROM sicmed_inspect a
		<include refid="sicmedInspectJoins" />
		<where>
			a.del_flag = #{DEL_FLAG_NORMAL}
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.update_date DESC
			</otherwise>
		</choose>
	</select>
	<!-- Max select -->
	<!-- 需要查询的字段 -->
	<sql id="sicmedInspectColumns2">
		a.id AS "id",
		a.inspect_name AS "inspectName"
	</sql>
	<!-- 模糊查询 -->
	<select id="findListLike" resultType="SicmedInspect">
		SELECT
		<include refid="sicmedInspectColumns2" />
		FROM sicmed_inspect a
		<where>
			a.del_flag = #{DEL_FLAG_NORMAL}
			<if test="sicmedInspectClass != null and  sicmedInspectClass!= ''">
				AND a.inspect_class_code = #{sicmedInspectClass.id}
			</if>
			<if test="inspectCode != null and inspectCode != ''">
				AND a.inspect_code like CONCAT('%','${inspectCode}','%' )
			</if>
			<if test="inspectName != null and inspectName != ''">
				AND a.inspect_name like CONCAT('%','${inspectName}','%' )
			</if>
			<if test="inspectNamePY != null and inspectNamePY != ''">
				AND a.inspect_name_py like CONCAT('%','${inspectNamePY}','%' )
			</if>
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
				ORDER BY a.update_date DESC
			</otherwise>
		</choose>
	</select>




	<insert id="insert">
		INSERT INTO sicmed_inspect(
		id,
		<!-- inspect_code, -->
		inspect_name,
		inspect_name_py,
		inspect_code,
		inspect_price_code,
		inspect_class_code,
		inspect_detail,
		create_by,
		create_date,
		update_by,
		update_date,
		remarks,
		del_flag
		) VALUES (
		#{id},
		<!-- #{inspectCode}, -->
		#{inspectName},
		#{inspectNamePY},
		#{inspectCode},
		#{sicmedInspectPrice.id},
		#{sicmedInspectClass.id},
		#{inspectDetail},
		#{createBy.id},
		#{createDate},
		#{updateBy.id},
		#{updateDate},
		#{remarks},
		#{delFlag}
		)
	</insert>

	<update id="update">
		UPDATE sicmed_inspect SET
		<!-- inspect_code = #{inspectCode}, -->
		inspect_name = #{inspectName},
		inspect_code = #{inspectCode},
		inspect_price_code = #{sicmedInspectPrice.id},
		inspect_class_code =
		#{sicmedInspectClass.id},
		inspect_detail = #{inspectDetail},
		update_by =
		#{updateBy.id},
		update_date = #{updateDate},
		remarks = #{remarks},
		inspect_name_py = #{inspectNamePY},
		del_flag = #{delFlag}
		WHERE id =
		#{id}
	</update>

	<update id="delete">
		UPDATE sicmed_inspect SET
		del_flag =
		#{DEL_FLAG_DELETE}
		WHERE id = #{id}
	</update>

</mapper>